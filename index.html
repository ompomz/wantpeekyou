<!DOCTYPE html>
<html lang="ja">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>want peek you</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";padding:.5rem;line-height:1.3;font-weight:400;background-color:#f7f7f7;color:#666;font-size:.9rem}#container{max-width:600px;margin-left:.5rem;margin-right:auto;padding:.5rem .5rem 0rem .5rem}h4{font-size:1.2rem;margin:0rem 0rem .5rem 0rem;color:#666}h5{font-size:1rem;margin-top:1rem}p{margin:0}a{color:#666;text-decoration:none}input,textarea,select{font-size:.9rem;padding:.5rem .3rem;border:1px solid #ddd;border-radius:4px;color:#666;background-color:#fff;cursor:pointer;transition:background-color 0.3s,color 0.3s;width:100%;margin-top:.5rem}input[type="checkbox"]{padding:0;margin:0;vertical-align:middle;appearance:checkbox;-webkit-appearance:checkbox}textarea{resize:vertical}.container-button{font-size:.8rem;font-weight:700;padding:.25rem 1rem;margin:.5rem .2rem;border:0 solid #ddd;border-radius:999px;color:#fff;background-color:#666;white-space:nowrap;cursor:pointer;transition:background-color 0.3s,color 0.3s}.container-button:hover{background-color:#555}.flex-container{display:flex;align-items:flex-start;gap:.5rem;margin:.5rem 0rem}.flex-item{flex-grow:1;display:flex;flex-direction:column}.flex-item label{margin-bottom:.2rem}.flex-item textarea{margin-top:0}#generatedJson{background-color:#eee;padding:.5rem;border:1px solid #ddd;border-radius:4px;white-space:pre-wrap;word-wrap:break-word;font-size:.8rem}#loader{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:rgba(255,255,255,.8);padding:1rem;border-radius:8px;z-index:10}#loader p{font-weight:700}#newListFormContainer{margin-top:1rem}#generateButton{background-color:#fc6;color:#fff}#generateButton:hover{background-color:#ffb833}#updateButton{background-color:#66b3ff;color:#fff}#updateButton:hover{background-color:#4da6ff}#decryptButton{background-color:#666;color:#fff}#decryptButton:hover{background-color:#555}@media(max-width:767px){#container{max-width:100%;padding:8px;margin:0}.flex-container{flex-direction:column;align-items:stretch}}</style>
</head>
<body>
 <div id="header-placeholder"></div>
 <h4>want peek you</h4>
 <span>Nostr kind:30000 Event Manager</span>
 <div id="container">
 <div id="loader" style="display:none;"><p>処理中...</p></div>
 
 <button id="getFromExtensionButton" type="button">拡張機能から取得</button>
 <label for="nsecInput">秘密鍵(nsec):</label>
 <input type="text" id="nsecInput" placeholder="nsec1..." value="">
 <div id="pubkeyInfo" style="margin-top:10px;">
 <p>公開鍵(npub):<span id="npubDisplay"></span></p>
 <p>公開鍵(hex):<span id="hexDisplay"></span></p>
 </div>

 <label for="relayInput">使用するリレー(改行&コンマ区切り、空欄でデフォルトリレーを使用)</label>
 <textarea id="relayInput" placeholder="wss://relay.nostr.band/,wss://nos.lol/"></textarea>

 <button class="container-button" id="fetchEventsButton">読み込み</button>
 <button class="container-button" id="showNewListButton">新規作成</button>
 <label for="dTagSelect">編集したいリストを選択:</label>
 <select id="dTagSelect" disabled>
 <option value=""></option>
 </select>
 <div id="newListFormContainer" style="display:none;">
 <label for="newDTagInput">新しいリスト名(dタグ):</label>
 <input type="text" id="newDTagInput" placeholder="例:my-friends-list">
 </div>
 <button class="container-button" id="decryptButton" disabled>リストを編集</button>
 <div class="flex-container">
 <div class="flex-item">
 <label for="contentInput">リストのメンバー(追加・削除):</label>
 <textarea id="contentInput" rows="5" placeholder="公開鍵をhex形式で入力(改行、カンマ、スペース区切り)"></textarea>
 </div>
 <div class="flex-item">
 <label for="pTagsInput">このリストのオーナー:</label>
 <textarea id="pTagsInput" rows="5" placeholder="公開鍵をhex形式で入力(改行、カンマ、スペース区切り)"></textarea>
 </div>
 </div>
 <button class="container-button" id="generateButton">変更内容を準備</button>
 <h5>生成されたJSON</h5>
 <pre id="generatedJson" style="min-height:100px;"></pre>
 <button class="container-button" id="updateButton" disabled>リストを更新する</button>
 </div>
 <script src="https://ompomz.github.io/header/loadHeader.js"></script>
 <script src="https://unpkg.com/nostr-tools@2.17.0/lib/nostr.bundle.js"></script>
 <script src="https://ompomz.github.io/flowgazer/relay-manager.js"></script>
 <script src="script.js"></script>
</body>
</html>